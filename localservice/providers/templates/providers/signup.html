{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Provider Signup</title>
    <link rel="stylesheet" href="{% static 'providers/css/form.css' %}">
</head>
<body>
    <div class="form-container">
        <h2>Provider Signup</h2>
        <form method="POST" action="{% url 'providers:signup' %}">
            {% csrf_token %}
            <input type="text" name="full_name" placeholder="Full Name" required class="input-field">
            <input type="email" name="email" placeholder="Email" required class="input-field">
            <input type="password" name="password" placeholder="Password" required class="input-field">
            <input type="text" name="phone" placeholder="Phone" class="input-field">
            <input type="text" name="service_name" placeholder="Service Name" class="input-field">
            <input type="text" name="service_category" placeholder="Service Category" class="input-field">
            <textarea name="bio" placeholder="Short Bio" class="input-field"></textarea>

            <!-- State Dropdown -->
            <select name="state" id="state" class="input-field" required>
                <option value="">Select State</option>
                {% for state in state_city.keys %}
                <option value="{{ state }}">{{ state }}</option>
                {% endfor %}
            </select>

            <!-- City Dropdown -->
            <select name="city" id="city" class="input-field" required>
                <option value="">Select City</option>
            </select>

            <button type="submit" class="btn">Signup</button>

            {% if messages %}
                <ul class="messages">
                {% for message in messages %}
                    <li class="{{ message.tags }}">{{ message }}</li>
                {% endfor %}
                </ul>
            {% endif %}
        </form>
        <p>Already have an account? <a href="{% url 'providers:login' %}">Login</a></p>
    </div>

    <script>
        const stateCity = {{ state_city|safe }};
        const stateSelect = document.getElementById('state');
        const citySelect = document.getElementById('city');

        stateSelect.addEventListener('change', () => {
            const cities = stateCity[stateSelect.value] || [];
            citySelect.innerHTML = '<option value="">Select City</option>';
            cities.forEach(city => {
                const opt = document.createElement('option');
                opt.value = city;
                opt.text = city;
                citySelect.appendChild(opt);
            });
        });
    </script>
</body>
</html>
